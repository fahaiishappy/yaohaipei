(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-complain"],{"12f9":function(t,a,e){"use strict";var i=e("5670"),o=e.n(i);o.a},"27ff":function(t,a,e){var i=e("24fb");a=i(!1),a.push([t.i,"body[data-v-0c029032], html[data-v-0c029032]{height:auto}.rztitle[data-v-0c029032]{position:fixed;left:0;right:0;z-index:210;font-size:4.5vw;font-weight:700;background-color:#fff;height:44px;line-height:44px;text-indent:3vw;box-shadow:0 1px 2px rgba(26,26,26,.1)}.hongren[data-v-0c029032]{bottom:0}.complain[data-v-0c029032]{margin:3vw}.platform_list[data-v-0c029032]{margin-top:3vw;background-color:#fff;border-radius:2vw}.platform_list .list[data-v-0c029032]{border-radius:2vw;box-shadow:1px 1px 2px rgba(26,26,26,.1)}.cu-form-group[data-v-0c029032]{margin:.5px 15px;padding:0}.cu-form-group .title[data-v-0c029032]{width:24vw}.cor-e8.text-lg[data-v-0c029032]{position:relative;left:-1vw;top:1vw}.cu-btn.lg[data-v-0c029032]{padding:0 3vw}.nothave[data-v-0c029032]{font-size:3.5vw;padding-bottom:3vw;color:#999}.op-0[data-v-0c029032]{opacity:0}.bg-img[data-v-0c029032]:first-child{margin:1vw 3vw}.bg-img[data-v-0c029032]{margin-right:1vw 3vw 1vw 0;box-shadow:1px 1px 2px rgba(26,26,26,.1)}.cu-btn.img[data-v-0c029032]{height:24px;font-size:12px;background-color:#e71d36;color:#fff;padding:0 2vw;border-radius:5px}.text-orange[data-v-0c029032], .line-orange[data-v-0c029032], .lines-orange[data-v-0c029032]{color:#999}.bg-orange[data-v-0c029032]{background-color:#e71d36;color:#fff;border-radius:2px}.confirm[data-v-0c029032]{background-color:#e71d36}.coent[data-v-0c029032]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.cu-form-group uni-picker[data-v-0c029032]::after{display:none}.remarks[data-v-0c029032]{text-align:center;padding:3vw 3vw;color:#e71d36;line-height:5vw;font-size:3.5vw;background-color:#fff}.customer[data-v-0c029032]{height:10vw;line-height:10vw;margin:auto;font-size:4vw;text-align:center;z-index:9990}.customer .bottombtn[data-v-0c029032]{width:94vw;height:100%;margin:auto;color:#fff;border-radius:10vw}.customer .bottombtn .custbtn[data-v-0c029032]{width:100%;background-color:#e71d36;border-radius:1.5vw}",""]),t.exports=a},"30a8":function(t,a,e){"use strict";var i,o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",[e("uni-top-bar"),e("v-uni-view",{staticClass:"rztitle",style:{top:t.height+43+"px"}},[t._v("我要投诉")]),e("v-uni-view",{staticClass:"complain",style:{marginTop:t.height+43+44+12+"px"}},[e("v-uni-view",{staticClass:"platform_list clearfix"},[e("v-uni-view",{staticClass:"list clearfix"},[e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[e("span",{staticClass:"cor-e8 text-lg "},[t._v("*")]),t._v("相关图片")]),e("v-uni-button",{staticClass:"img cu-btn shadow",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.licenseImage.apply(void 0,arguments)}}},[t._v("上传图片")])],1),t.addressData.license?e("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[e("v-uni-view",{staticClass:"bg-img"},[e("v-uni-image",{attrs:{src:t.addressData.license,mode:"aspectFill"}}),e("v-uni-view",{staticClass:"cu-tag bg-red",on:{click:function(a){a.stopPropagation(),arguments[0]=a=t.$handleEvent(a),t.DelImg("license")}}},[e("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)],1):t._e(),e("v-uni-view",{staticClass:"cu-form-group align-start"},[e("v-uni-view",{staticClass:"title"},[e("span",{staticClass:"cor-e8 text-lg"},[t._v("*")]),t._v("投诉内容")]),e("v-uni-textarea",{staticStyle:{height:"200px"},attrs:{placeholder:"请输入投诉内容"},model:{value:t.addressData.details,callback:function(a){t.$set(t.addressData,"details",a)},expression:"addressData.details"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[e("span",{staticClass:"cor-e8 text-lg"},[t._v("*")]),t._v("联系电话")]),e("v-uni-input",{attrs:{type:"number",placeholder:"请输入联系电话"},model:{value:t.addressData.mobile,callback:function(a){t.$set(t.addressData,"mobile",a)},expression:"addressData.mobile"}})],1),e("v-uni-view",{staticClass:"cu-form-group"},[e("v-uni-view",{staticClass:"title"},[e("span",{staticClass:"cor-e8 text-lg"},[t._v("*")]),t._v("微信号码")]),e("v-uni-input",{attrs:{type:"text",placeholder:"请输入微信号"},model:{value:t.addressData.wechat_work,callback:function(a){t.$set(t.addressData,"wechat_work",a)},expression:"addressData.wechat_work"}})],1)],1)],1)],1),e("v-uni-view",{staticClass:"cu-bar tabbar bg-white shadow foot"},[e("v-uni-view",{staticClass:"customer shadow text-center"},[e("v-uni-view",{staticClass:"bottombtn clearfix"},[e("v-uni-view",{staticClass:"custbtn",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.confirm.apply(void 0,arguments)}}},[t._v("我要投诉")])],1)],1)],1)],1)},s=[];e.d(a,"b",(function(){return o})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}))},5572:function(t,a,e){"use strict";e.r(a);var i=e("aee7"),o=e.n(i);for(var s in i)"default"!==s&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=o.a},5670:function(t,a,e){var i=e("27ff");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("4fb216b4",i,!0,{sourceMap:!1,shadowMode:!1})},a846:function(t,a,e){"use strict";e.r(a);var i=e("30a8"),o=e("5572");for(var s in o)"default"!==s&&function(t){e.d(a,t,(function(){return o[t]}))}(s);e("12f9");var n,r=e("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"0c029032",null,!1,i["a"],n);a["default"]=c.exports},aee7:function(t,a,e){"use strict";var i=e("ee27");e("4160"),e("4d63"),e("ac1f"),e("25f0"),e("159b"),Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var o=i(e("9dcd")),s={components:{uniTopBar:o.default},data:function(){return{btn:!1,modalName:null,addressData:{company:"",title:"",logo:"",license:"",category:"",platform:"",province:"",city:"",area:"",homepage:"",shop_link:"",contact:"",mobile:"",wechat_work:""},logoimg:"",category:"",platform:"",userInfo:"",height:"",examine:"",remarks:""}},onLoad:function(){var t=this;t.height=this.StatusBar,uni.getStorage({key:"userInfo",success:function(a){t.userInfo=a.data,t.addressData.mid=t.userInfo.id,t.merchantcategory(),t.merchantplatform(),t.attesj()}})},methods:{confirm:function(){return this.addressData.company?this.addressData.license?this.addressData.title?this.addressData.logo?this.addressData.category?this.addressData.contact?this.addressData.mobile?this.checkMobile(this.addressData.mobile)?this.addressData.wechat_work?(this.btn=!0,void uni.request({url:"https://www.hongrensutui.com/api/index/Merchantadd",data:this.addressData,method:"post",header:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"json",success:function(t){uni.showToast({icon:"none",title:t.data.data.info}),setTimeout((function(){uni.navigateBack({delta:2})}),2e3)},fail:function(t){uni.showToast({icon:"none",title:"入驻失败！"}),this.btn=!1}})):(uni.showToast({title:"微信号不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"联系电话格式不正确",icon:"none",duration:3e3}),!1):(uni.showToast({title:"联系电话不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"联系人不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"商家分类不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"商家logo不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"品牌名称不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"营业执照不能为空",icon:"none",duration:3e3}),!1):(uni.showToast({title:"企业名称不能为空",icon:"none",duration:3e3}),!1)},checkMobile:function(t){return RegExp(/^1[34578]\d{9}$/).test(t)},picker_change:function(t){var a=this;a.addressData.province=t.detail.value[0],a.addressData.city=t.detail.value[1],a.addressData.area=t.detail.value[2]},attesj:function(){var t=this;uni.request({url:"https://www.hongrensutui.com/api/index/attesj",data:{id:t.userInfo.id},method:"POST",success:function(a){if(a.data.data.info){var e=a.data.data.info;t.addressData.company=e.company,t.addressData.title=e.title,t.addressData.logo=e.logo,t.addressData.license=e.license,t.addressData.category=e.category,t.addressData.platform=e.platform,t.addressData.homepage=e.homepage,t.addressData.shop_link=e.shop_link,t.addressData.contact=e.contact,t.addressData.mobile=e.mobile,t.addressData.wechat_work=e.wechat_work,t.examine=e.examine,t.remarks=e.remarks,t.merchantcategory(e.category),t.merchantplatform(e.platform)}else t.merchantcategory(),t.merchantplatform()}})},merchantcategory:function(t){var a=this;uni.request({url:"https://www.hongrensutui.com/api/index/merchantcategory",data:{category:t},method:"POST",success:function(t){a.category=t.data.data.list}})},merchantplatform:function(t){var a=this;uni.request({url:"https://www.hongrensutui.com/api/index/merchantplatform",data:{platform:t},method:"POST",success:function(t){a.platform=t.data.data.list}})},logoImage:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var e=a.tempFilePaths;uni.uploadFile({url:"https://www.hongrensutui.com/api/upload/index",filePath:e[0],name:"image",success:function(a){var e=JSON.parse(a.data);t.addressData.logo=e.data.url}})}})},licenseImage:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var e=a.tempFilePaths;uni.uploadFile({url:"https://www.hongrensutui.com/api/upload/index",filePath:e[0],name:"image",success:function(a){var e=JSON.parse(a.data);t.addressData.license=e.data.url}})}})},DelImg:function(t){var a=this;uni.showModal({title:"",content:"确定要删除图片么？",cancelText:"取消",confirmText:"确认",success:function(e){e.confirm&&("logo"==t?a.addressData.logo="":a.addressData.license="")}})},showModal:function(t){this.modalName=t.currentTarget.dataset.target},hideModal:function(t){this.modalName=null},chkplatform:function(t){var a=this,e=0,i=0;this.addressData.platform="",this.platform.forEach((function(t,a){1==t.checked&&e++})),this.platform.forEach((function(t,o){1==t.checked&&(i++,a.addressData.platform+=i!=e?t.name+",":t.name)})),this.modalName=null},chkcategory:function(t){var a=this,e=0,i=0;this.addressData.category="",this.category.forEach((function(t,a){1==t.checked&&e++})),this.category.forEach((function(t,o){1==t.checked&&(i++,a.addressData.category+=i!=e?t.name+",":t.name)})),this.modalName=null},ChooseCheckbox:function(t){t.checked=!t.checked}}};a.default=s}}]);